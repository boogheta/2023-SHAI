(function(){"use strict";var t={5446:function(t,e,a){var i=a(7195),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.is_loading?t._e():e("router-view",{key:t.$route.hash,attrs:{nav_menu:t.nav_menu,page:t.current_content,corpora_data:t.corpora_data}})],1)],1)},r=[];const s=a(8922),o=a(5107);var c={props:{},components:{},data(){return{is_loading:!0,pages:void 0,publicPath:"/ShapingAI/",corpora_data:void 0}},async created(){let t=await this.fetchDoc();t=this.correctLinks(t);const e=await this.formatDoc(t);this.pages=e,await this.loadArchive(),this.is_loading=!1},mounted(){},beforeDestroy(){},watch:{},computed:{current_content(){if(this.pages){const t=this.pages.find((t=>t.url===this.$route.path+this.$route.hash));return t||"no_matching_page"}return!1},nav_menu(){return this.pages?this.pages.filter((t=>!t.invisible_dans_menu&&t.nom_de_page)).map((t=>({path:t.url,name:t.nom_de_page}))):[]}},methods:{async fetchDoc(){const t=this.publicPath+"content.txt",e=await fetch(t),a=await e.text();return a},correctLinks(t){return t.replaceAll("https://corpora.medialab.sciences-po.fr/",this.publicPath)},async formatDoc(t){let e=t.split("[PAGE]");return e.map((t=>s(t)))},async loadArchive(){const t=this.publicPath+"shaping_archive.csv",e=t=>new Promise((e=>{o.parse(t,{download:!0,header:!0,dynamicTyping:!0,complete:t=>{e(t.data)},transform:(t,e)=>{if("collections"===e)return JSON.parse(t);if("thumbs"===e){try{const e=JSON.parse(t),a=e[0];return a&&a.thumbsData&&a.thumbsData[0]&&a.thumbsData[4]?{large_src:this.publicPath+a.thumbsData[4].path,icon_src:this.publicPath+a.thumbsData[0].path}:""}catch(a){console.log(t)}return""}return t}})})),a=await e(t);this.corpora_data=a}}},l=c,u=a(1001),_=(0,u.Z)(l,n,r,!1,null,null,null),m=_.exports,g=a(2241),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_pageContent"},[e("div",{staticClass:"_twoRows"},[e("div",{staticClass:"_images"},[e("ImageBox",{attrs:{images:t.list_of_images,currently_active_image:t.currently_active_image},on:{showImage:t.showImage}})],1),e("div",{staticClass:"_text"},[e("TextBox",{attrs:{nav_menu:t.nav_menu,text:t.page.contenu,currently_active_image:t.currently_active_image,corpora_data:t.corpora_data},on:{updateListOfImages:t.updateListOfImages,showImage:t.showImage}})],1)])])},p=[],h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_imageBox"},[e("div",{staticClass:"_singleImage"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.currently_active_image?[t.currently_active_image.large_src?e("a",{key:t.currently_active_image.id,attrs:{href:t.currently_active_image.large_src,target:"_blank"}},[e("img",{attrs:{src:t.currently_active_image.large_src,alt:t.currently_active_image.text,title:t.currently_active_image.title}})]):t.currently_active_image.iframe?e("div",{key:t.currently_active_image.id,staticClass:"_videoIframe",domProps:{innerHTML:t._s(t.currently_active_image.iframe)}}):t._e()]:e("div",{key:"none",staticClass:"_none"},[t._v("Aucune")])],2),e("div",{staticClass:"_captionBloc"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[t.currently_active_image?e("div",{key:t.currently_active_image?.id||"none",staticClass:"_captionBloc--text",domProps:{innerHTML:t._s(t.currently_active_image.text)}}):t._e()]),e("div",{staticClass:"_captionBloc--nav"},[e("button",{staticClass:"u-button",attrs:{type:"button",disabled:0===t.currently_active_image_index},on:{click:t.prevImage}},[e("b-icon",{attrs:{icon:"arrow-left-circle"}})],1),e("span",[t._v(" "+t._s(t.currently_active_image_index+1)+"/"+t._s(t.images.length)+" ")]),e("button",{staticClass:"u-button",attrs:{type:"button",disabled:t.currently_active_image_index>=t.images.length},on:{click:t.nextImage}},[e("b-icon",{attrs:{icon:"arrow-right-circle"}})],1)]),e("div",{staticClass:"_showAllBtn"},[e("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(e){t.show_all_images=!0}}},[e("b-icon",{attrs:{icon:"grid-3x3-gap"}})],1)])],1)],1),e("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.show_all_images?e("div",{staticClass:"_allImages"},[e("button",{staticClass:"u-button _closeBtn",attrs:{type:"button"},on:{click:function(e){t.show_all_images=!1}}},[e("b-icon",{attrs:{icon:"x-lg"}})],1),t._l(t.images,(function(a){return e("button",{key:a.id,staticClass:"_btnImage",class:{"is--active":t.currently_active_image&&a.id===t.currently_active_image.id},attrs:{type:"button"},on:{click:function(e){return t.toggleImage(a.id)}}},[a.large_src?e("img",{attrs:{src:a.large_src,alt:a.text,title:a.title}}):e("span",{domProps:{innerHTML:t._s(a.iframe)}}),e("div",{staticClass:"_imageText",domProps:{innerHTML:t._s(a.text)}})])}))],2):t._e()])],1)},f=[],v={props:{images:Array,currently_active_image:[Boolean,Object]},components:{},data(){return{show_all_images:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{currently_active_image_index(){return this.currently_active_image?this.images.findIndex((t=>t.id===this.currently_active_image.id)):0}},methods:{toggleImage(t){this.$eventHub.$emit("textBox.scroll_to_btn",t),this.$emit("showImage",t),this.show_all_images=!1},prevImage(){const t=this.images[this.currently_active_image_index-1].id;this.toggleImage(t)},nextImage(){const t=this.images[this.currently_active_image_index+1].id;this.toggleImage(t)}}},y=v,b=(0,u.Z)(y,h,f,!1,null,"2f1f7f1b",null),x=b.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"_textBox",on:{scroll:t.onScroll}},[e("nav",{staticClass:"_menu"},t._l(t.nav_menu,(function(a){return e("div",{key:a.path},[e("router-link",{attrs:{to:a.path}},[t._v(t._s(a.name))])],1)})),0),e("div",{staticClass:"_textBox--content"},[e("style",{tag:"component"},[t._v(" "+t._s(t.active_btn_styles)+" ")]),t.md_text?e("div",{ref:"content",domProps:{innerHTML:t._s(t.md_text)},on:{click:t.interceptBtn}}):e("div",{staticClass:"_cantLoad"},[t._v("N’a pas pu charger")])],1)])},$=[],T=(a(7658),a(8569)),I=a(9266),k=a.n(I),C={props:{nav_menu:Array,text:String,currently_active_image:[Boolean,Object],corpora_data:Array},components:{},data(){return{scroll_view_margin_top:200}},created(){this.$eventHub.$on("textBox.scroll_to_btn",this.scrollToBtn)},mounted(){},beforeDestroy(){this.$eventHub.$off("textBox.scroll_to_btn",this.scrollToBtn)},watch:{currently_active_image(){}},computed:{md_text(){if(!this.text)return!1;const t=new T.TU.Renderer,e=t.link;t.link=(a,i,n)=>{const r=a.startsWith(`${location.protocol}//${location.hostname}`)||a.startsWith("/"),s=e.call(t,a,i,n);return r?s:s.replace(/^<a /,'<a rel="noreferrer noopener nofollow" target="_blank" ')};let a=[];const i=t.heading;t.heading=(e,n)=>{if(5===n){const t=this.corpora_data.filter((t=>t.collections&&t.collections.some((t=>t.startsWith(e)))));let i=t.reduce(((t,e)=>{const i="<i>"+e.title+"</i><br>";let n="<div>";e.authors_of_document&&(n+=`<span>${e.authors_of_document}</span>, `),e.year&&(n+=`<span>${e.year}</span>, `),e.type_of_document&&(n+=`<span>${e.type_of_document}</span>`),e.thumbs?.icon_src&&(n+=`<br>\n                <a href="${this.getPDFFromThumb(e.thumbs.icon_src)}" target="_blank">Télécharger le pdf</a>\n              `),n+="</div>";const r="id"+Math.random().toString(16).slice(2);return t+=`\n            <button type="button" class="_collEntry" data-imageToDisplay="${r}">\n                <img src="${e.thumbs?.icon_src}" />\n                ${i}\n                ${n}\n            </button>\n          <hr>\n            `,e.thumbs?.large_src&&e.thumbs?.icon_src&&a.push({id:r,large_src:e.thumbs.large_src,icon_src:e.thumbs.icon_src,title:"",text:i+n}),t}),"");return`<div class="_corporaFiles">${i}</div>`}const r=i.call(t,e,n);return r};const n=t.html;t.html=(e,i)=>{if(e.startsWith("<iframe ")){const r="id"+Math.random().toString(16).slice(2);a.push({id:r,iframe:e});const s=n.call(t,e,i);return`<span class="_hideIframe" data-imageToDisplay="${r}">${s}</span>`}return n.call(t,e,i)};const r=t.image;t.image=(e,i,n)=>{let s,o;if(e.includes(">")){const t=e.split(">");s=t[0],o=t[1]}else s=o=e;const c="id"+Math.random().toString(16).slice(2);a.push({id:c,large_src:o,icon_src:s,title:i,text:n});const l=r.call(t,s,i,n);return`<button type="button" data-imageToDisplay="${c}">${l}</button>`},this.$emit("updateListOfImages",a),T.TU.use({renderer:t});const s={postprocess(t){return k().sanitize(t,{ADD_TAGS:["iframe","svg"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling","target"]})}};return T.TU.use({hooks:s}),T.TU.parse(this.text,{breaks:!0})},active_btn_styles(){return this.currently_active_image?`\n      button[data-imagetodisplay="${this.currently_active_image.id}"] img {\n          mix-blend-mode: hard-light;\n      }\n      ._collEntry[data-imagetodisplay="${this.currently_active_image.id}"] {\n        // background:var(--color-scipo) !important;\n        border-left: 2px solid var(--color-scipo) !important;\n      }\n      `:""}},methods:{interceptBtn(t){const e=t.target.dataset?.imagetodisplay;e&&this.$emit("showImage",e)},scrollToBtn(t){const e=this.$refs.content.querySelector(`[data-imagetodisplay=${t}]`);if(!e)return!1;const a=this.$refs.content.closest("._textBox");a.scrollTo({top:e.offsetTop-this.scroll_view_margin_top,left:0,behavior:"instant"})},getPDFFromThumb(t){return t?/.pdf/.test(t)?t.substring(0,t.indexOf(".pdf")+4).replace(/^.*_thumbs\/shaping-ai\//,"pdfs/"):t.replace(/^.*_thumbs\/shaping-ai\//,"pdfs/"):""},onScroll(){const t=Array.from(this.$refs.content.querySelectorAll("[data-imagetodisplay]")),e=this.$el.scrollTop+this.scroll_view_margin_top;let a=1e6,i=0;t.map(((t,n)=>{const r=Math.abs(t.offsetTop+t.offsetLeft/1e4-e);r<a&&(i=n,a=r)}));const n=t[i],r=n.dataset?.imagetodisplay;r!==this.currently_active_image?.id&&this.$emit("showImage",r)}}},P=C,B=(0,u.Z)(P,w,$,!1,null,"effca00a",null),D=B.exports,A={props:{nav_menu:[Array],page:[Boolean,Object],corpora_data:[Array]},components:{ImageBox:x,TextBox:D},data(){return{list_of_images:[],currently_active_image_id:!1}},created(){},mounted(){document.title=`Shaping AI | ${this.page.nom_de_page}`},beforeDestroy(){},watch:{},computed:{currently_active_image(){return!1===this.currently_active_image_id?this.list_of_images[0]:this.list_of_images.find((t=>t.id===this.currently_active_image_id))}},methods:{updateListOfImages(t){this.list_of_images=t},showImage(t){this.currently_active_image_id!==t&&(this.currently_active_image_id=t)}}},O=A,S=(0,u.Z)(O,d,p,!1,null,"a2a0707e",null),L=S.exports;i.ZP.use(g.ZP);const Z=[{path:"/",name:"accueil",component:L},{path:"/:slug",name:"page",component:L}],M=new g.ZP({mode:"history",base:"/ShapingAI/",routes:Z});var j=M,H=a(233);i.ZP.config.productionTip=!1,i.ZP.use(H.A7),i.ZP.prototype.$eventHub=new i.ZP,new i.ZP({router:j,render:t=>t(m)}).$mount("#app")}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,i,n,r){if(!i){var s=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],r=t[u][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[i,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,s=i[0],o=i[1],c=i[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(c)var u=c(a)}for(e&&e(i);l<s.length;l++)r=s[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},i=self["webpackChunkapp"]=self["webpackChunkapp"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(5446)}));i=a.O(i)})();
//# sourceMappingURL=app.b7ddaa28.js.map